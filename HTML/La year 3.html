<!DOCTYPE html>
<html>
   <head>
      <meta charset="utf-8">
   <title>Show and hide layers</title>
   <meta name="viewport" content="initial-scale=18,maximum-scale=1,user-scalable=yes" />
   <script src="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js"></script>
   <link href="https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.css" rel="stylesheet" />
   <script src="http://libs.baidu.com/jquery/2.1.4/jquery.min.js"></script>
   <style>
   *{
      margin: 0;
      margin: 0;
   }
   body,html{
      
   }
   #map {
       position: absolute;
       top: 0;
       bottom: 0;
       width: 100%;
   }
   #menu{
          position: absolute;
          z-index: 100;
          top: 700px;
          left: 20px;
          border-radius: 1px;
          width: 60px;
          font-family: 'Open Sans', sans-serif;
          background-color: rgba(0,0,0, 0.5);
      }
      .nav_box{
         overflow: hidden;
      }
      .nav_item{
         float: left;width: 80%;
      }
      .nav_item a{
         display: block;
         width: 50px; /*X-space between*/
         border-radius: 20px;
         font-size: 18px; /*text size in menu*/
         text-align: center;
         margin-bottom: 10px;
         word-break:break-all;
         padding: 3px;
         line-height: 20px;/*Y-space hight*/
         cursor: pointer;
         transition: all .2s ease;
      }
      .nav_item a:hover{
         background-color: rgba(0,0,0,.1);
      }
      .active_on{
         background-color: rgba(0,0,0,.18);
         /* color: #fff !important; */
      }
      a{
         color: white; /*'all' and 'clear' color*/
      }
      .cln {
         text-align: center;
         padding-bottom: 10px;
         color: #3074a4;
      }
      .cln a{
         margin: 10px; /* space between the 'all' and 'clean' */
         font-size: 12px; /*'all' and 'clean' text size*/
      }
   </style>
   
   </head>
   <body>
      <nav id="menu">
         <div class="cln">
            <a>ALL</a>
            <a>CLEAR</a>
         </div>
         <div class="nav_box">
         <div class="nav_item a">
            <a style="color:rgba(80, 104, 68,0.5) ;" class="on">1890</a>
            <a style="color:rgba(80, 171, 68,0.5) ;">1900</a>
            <a style="color:rgba(0, 134, 68,0.5) ;">1910</a>
            <a style="color:rgba(0, 192, 114,0.5) ;">1920</a>
            <a style="color:rgba(61, 176, 179,0.5) ;">1930</a>
            <a style="color:rgba(107, 93, 193,0.5) ;">1940</a>
            <a style="color:rgba(106,77,216,0.5) ;">1950</a>
            <a style="color:rgba(238, 153, 245,0.5) ;">1960</a>
            <a style="color:rgba(238, 95, 245,0.5) ;">1970</a>
            <a style="color:rgba(162,1,77,0.5) ;">1980</a>
            <a style="color:rgba(209,65,77,0.5) ;">1990</a>
            <a style="color:rgba(255,153,0,0.5) ;">2000</a>
            <a style="color:rgba(80,104,68,0.5) ;">2010</a>  
         </div>
         <script>
            $(function(){
               $('.nav_item a').each(function(){
                  $(this).click(function(){
                     var t=$(this).text();
                     $("#frame").attr('src',t+'.html');
                     var tColor=$(this).css('color');
                     $('.nav_item a').each(function(){
                        var tColor2=$(this).css('color');
                        tColor2=tColor2.replace("0.95","0.5");
                        $(this).css('color',tColor2);
                     })
                     tColor=tColor.replace("0.5","0.95");
                     $(this).css('color',tColor);
                  })
               })
            })
         </script>
         
      </nav>



   <div id="map"></div>
   <script>
      mapboxgl.accessToken = 'pk.eyJ1Ijoic2NvdHRtYWhveSIsImEiOiJjajMzY3JuYmMwMGE1MndxNjQwdHFxZm0zIn0.Wg6c630lEtSOEuqpRDvItw';
      var map = new mapboxgl.Map({
         container: 'map',
         style: 'mapbox://styles/scottmahoy/cl5n08e98000014rq4enrrdlx',
         zoom: 10,
         center: [-118.25, 33.9]
      });
      map.on('load', function () {
      // Year for 1890
         map.addSource('1890', {
            type: 'vector',
            url: 'mapbox://scottmahoy.87s4tjao'
         });//end addsource
         map.addLayer({
            'id': '1890',
            'type': 'fill',
            'source': '1890',
            'layout': {
               'visibility': 'none'
            },
            'paint': {
               'fill-color': 'rgba(80, 104, 68,0.5)'
            },
            'source-layer':
            'full1890layer'
         })

      // Year for 1900
         map.addSource('1900', {
            type: 'vector',
            url: 'mapbox://scottmahoy.ccqmx4bi'
         });//end addsource
         map.addLayer({
            'id': '1900',
            'type': 'fill',
            'source': '1900',
            'layout': {
               'visibility': 'none'
            },
            'paint': {
               'fill-color': 'rgba(80, 171, 68,0.5)'
            },
            'source-layer':
            'full1900layer'
         })

      // Year for 1910
         map.addSource('1910', {
            type: 'vector',
            url: 'mapbox://scottmahoy.djrlvzzy'
         });//end addsource
         map.addLayer({
            'id': '1910',
            'type': 'fill',
            'source': '1910',
            'layout': {
               'visibility': 'none'
            },
            'paint': {
               'fill-color': 'rgba(0, 134, 68,0.5)'
            },
            'source-layer':
            'full1910layer'
         })

      // Year for 1920
         map.addSource('1920', {
            type: 'vector',
            url: 'mapbox://scottmahoy.8vo0sv6w'
         });//end addsource
         map.addLayer({
            'id': '1920',
            'type': 'fill',
            'source': '1920',
            'layout': {
               'visibility': 'none'
            },
            'paint': {
               'fill-color': 'rgba(0, 192, 114,0.5)'
            },
            'source-layer':
            'full20elayer'
         });
      // Year for 1930
         map.addSource('1930', {
            type: 'vector',
            url: 'mapbox://scottmahoy.0qrj7vz3'
         });//end addsource
         map.addLayer({
            'id': '1930',
            'type': 'fill',
            'source': '1930',
            'layout': {
               'visibility': 'none'
            },
            'paint': {
               'fill-color': 'rgba(61, 176, 179,0.5)'
            },
            'source-layer':
            'full30layer'
         });

      // Year for 1940
         map.addSource('1940', {
            type: 'vector',
            url: 'mapbox://scottmahoy.236q5sd3'
         });//end addsource
         map.addLayer({
            'id': '1940',
            'type': 'fill',
            'source': '1940',
            'layout': {
               'visibility': 'none'
            },
            'paint': {
               'fill-color': 'rgba(107, 93, 193,0.5)'
            },
            'source-layer':
            'full40layer'
         });

      // Year for 1950
         map.addSource('1950', {
            type: 'vector',
            url: 'mapbox://scottmahoy.91eeja7n'
         });//end addsource
         map.addLayer({
            'id': '1950',
            'type': 'fill',
            'source': '1950',
            'layout': {
               'visibility': 'none'
            },
            'paint': {
               'fill-color': 'rgba(106,77,216,0.5)'
            },
            'source-layer':
            'full50layer'
         });

      // Year for 1960
         map.addSource('1960', {
            type: 'vector',
            url: 'mapbox://scottmahoy.7d0sw3py'
         });//end addsource
         map.addLayer({
            'id': '1960',
            'type': 'fill',
            'source': '1960',
            'layout': {
               'visibility': 'none'
            },
            'paint': {
               'fill-color': 'rgba(238, 153, 245,0.5)'
            },
            'source-layer':
            'full20elayer'
         });

      // Year for 1970
         map.addSource('1970', {
            type: 'vector',
            url: 'mapbox://scottmahoy.axo6atst'
         });//end addsource
         map.addLayer({
            'id': '1970',
            'type': 'fill',
            'source': '1970',
            'layout': {
               'visibility': 'none'
            },
            'paint': {
               'fill-color': 'rgba(238, 95, 245,0.5)'
            },
            'source-layer':
            'full70layer'
         });

      // Year for 1980
         map.addSource('1980', {
            type: 'vector',
            url: 'mapbox://scottmahoy.89wff069'
         });//end addsource
         map.addLayer({
            'id': '1980',
            'type': 'fill',
            'source': '1980',
            'layout': {
               'visibility': 'none'
            },
            'paint': {
               'fill-color': 'rgba(162,1,77,0.5)'
            },
            'source-layer':
            'full80layer'
         });

      // Year for 1990
         map.addSource('1990', {
            type: 'vector',
            url: 'mapbox://scottmahoy.826glfy3'
         });//end addsource
         map.addLayer({
            'id': '1990',
            'type': 'fill',
            'source': '1990',
            'layout': {
               'visibility': 'none'
            },
            'paint': {
               'fill-color': 'rgba(209,65,77,0.5)'
            },
            'source-layer':
            'full90layer'
         });

      // Year for 2000
         map.addSource('2000', {
            type: 'vector',
            url: 'mapbox://scottmahoy.dsdzty1c'
         });//end addsource
         map.addLayer({
            'id': '2000',
            'type': 'fill',
            'source': '2000',
            'layout': {
               'visibility': 'none'
            },
            'paint': {
               'fill-color': 'rgba(255,153,0,0.5)'
            },
            'source-layer':
            'FP_2000-b5oayi'
         });

      // Year for 2010
         map.addSource('2010', {
            type: 'vector',
            url: 'mapbox://scottmahoy.dwwt5ef3'
         });//end addsource
         map.addLayer({
            'id': '2010',
            'type': 'fill',
            'source': '2010',
            'layout': {
               'visibility': 'none'
            },
            'paint': {
               'fill-color': 'rgba(80,104,68,0.5)'
            },
            'source-layer':
            'full2010layer'
         });


         map.addLayer({
            'id': 'ALL'
         });

         map.addLayer({
            'id': 'CLEAR'
         })

      });//end onload function


   var btns=$('#menu a');
   var btns2=$('.nav_item a');
   var length_btns=btns2.length;
   var show_num=0;
 var dt= setInterval(function(){
	   var layer = btns2.eq(show_num).text();
	  // console.log(layer)
	   var visibility = map.getLayoutProperty(layer, 'visibility');
	   if (visibility == 'none') {
	      map.setLayoutProperty(layer, 'visibility', 'visible');
	       btns2.eq(show_num).addClass('active');
	   };
	    show_num++;
		if(show_num>length_btns){
					   clearInterval(dt);
		}
	   
   },1000);/*Time for color show*/
    btns.each(function(){
      $(this).click(function(e){
         var clickedLayer = $(this).text();
         if (clickedLayer == 'ALL') {
         btns.each(function(index){
            var layer = btns.eq(index).text();
            var visibility = map.getLayoutProperty(layer, 'visibility');
            if (visibility == 'none') {
               map.setLayoutProperty(layer, 'visibility', 'visible');
               this.className = '';
                $('#menu a').eq(index).addClass('active_on');
            }
            else {
               this.className = 'active';
               map.setLayoutProperty(layer, 'visibility', 'none');
            }
         })
              
         }//
         
         if (clickedLayer == 'CLEAR') {
          btns.each(function(index){
            var layer = btns.eq(index).text();
               var visibility = map.getLayoutProperty(layer, 'visibility');
               if (visibility == 'visible') {
                  map.setLayoutProperty(layer, 'visibility', 'none');
                $('#menu a').eq(index).removeClass('active_on');
                  this.className = '';
               }
           })
         }//
         
         //
         
         if (clickedLayer == '1890') {
                       var btn_all=$('.'+clickedLayer+' a');
                       btn_all.each(function(index){
                         var layer = btn_all.eq(index).text();;
                            var visibility = map.getLayoutProperty(layer, 'visibility');
                         if (visibility == 'none') {
                            map.setLayoutProperty(layer, 'visibility', 'visible');
                                          btn_all.eq(index).addClass('active_on');
                         }
                         else {
                            map.setLayoutProperty(layer, 'visibility', 'none');
                                          btn_all.eq(index).removeClass('active_on')
                         } 
                       })
         }
         
      
         
         
         var visibility = map.getLayoutProperty(clickedLayer, 'visibility');
         if (visibility === 'none') {
            map.setLayoutProperty(clickedLayer, 'visibility', 'visible');
            this.className = 'active_on';
            
         } 
         else {
            this.className = 'active';
            map.setLayoutProperty(clickedLayer, 'visibility', 'none');
         }
         
         //
      });
      
      if (map.getLayer("cluster-count")) {
         map.removeLayer("cluster-count");
      }
      
      
   })


map.addControl(new mapboxgl.NavigationControl(), 'top-left');

map.add
 
</script>
 
<script>

</script>
 
   </body>
</html>

